import{p as e,a as o,o as s,c as t,b as a,w as l,d as n,r,e as i,i as c,v as d,n as u,l as m,D as p,f as b,u as g,g as f,h,j as x,k as w,m as k,q as v,s as y,t as _,x as C,y as P,z,A as R,F as j,B as I,C as L,E as B,G as U,H as M,I as D,J as $,K as S,L as E,M as N,N as A,O,P as q,Q as V,R as H,S as T,T as J,U as F,V as K,W as Z,X as G}from"./vendor.150d2865.js";!function(e=".",o="__import__"){try{self[o]=new Function("u","return import(u)")}catch(s){const t=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[o]=e=>new Promise(((s,l)=>{const n=new URL(e,t);if(self[o].moduleMap[n])return s(self[o].moduleMap[n]);const r=new Blob([`import * as m from '${n}';`,`${o}.moduleMap['${n}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){l(new Error(`Failed to import: ${e}`)),a(i)},onload(){s(self[o].moduleMap[n]),a(i)}});document.head.appendChild(i)})),self[o].moduleMap={}}}("/chat-box/assets/");const Q=l("data-v-e74e4a82");e("data-v-e74e4a82");const W={class:"z-10 landing-page flex flex-col justify-center items-center w-full bg-chatbox-bg-light h-full p-10 gap-10 md:gap-0 overflow-hidden"},X=a("img",{class:"w-36 md:absolute md:top-4 z-10",src:"/chat-box/assets/logo.b62c4343.png",alt:"logo"},null,-1),Y={class:"z-10 md:grid md:grid-cols-2 md:justify-center items-center w-4/5 gap-8"},ee=a("img",{class:"browser-window animate__animated animate__slideInLeft mb-4 z-10",src:"/chat-box/assets/browser-window.76255c99.png",alt:"browser"},null,-1),oe={class:"animate__animated animate__slideInRight z-10 flex flex-col justify-center items-center text-white"},se=a("p",{class:"z-10 content text-lg md:text-xl mb-8"}," A realtime chat room service that allows different users to communicate in a single room ",-1),te=n(" Existing User? Login Now! "),ae=a("img",{class:"left-blob hidden md:block",src:"/chat-box/assets/blob-left-dark.e098efd7.png",alt:"blob"},null,-1),le=a("img",{class:"right-blob hidden md:block",src:"/chat-box/assets/blob-right-dark.1f44879c.png",alt:"blob"},null,-1),ne=a("img",{class:"top-blob md:hidden",src:"/chat-box/assets/blob-top-dark.7ca605f0.png",alt:"blob"},null,-1),re=a("img",{class:"bottom-blob md:hidden",src:"/chat-box/assets/blob-bottom-dark.fd6137bb.png",alt:"blob"},null,-1);o();const ie={expose:[],setup:e=>Q(((e,o)=>{const l=r("router-link");return s(),t("div",W,[X,a("div",Y,[ee,a("div",oe,[se,a(l,{to:"/register",custom:""},{default:Q((({navigate:e})=>[a("button",{type:"button",class:"z-10 border-chatbox-pink border-solid border-2 rounded-lg bg-chatbox-bg-dark p-2 outline-none w-full md:w-1/2",onClick:e}," Register Now ",8,["onClick"])])),_:1}),a(l,{to:"/login",class:"z-10 text-sm underline"},{default:Q((()=>[te])),_:1})])]),ae,le,ne,re])})),__scopeId:"data-v-e74e4a82"};var ce="/chat-box/assets/blob-left-light.9ab10b93.png",de="/chat-box/assets/blob-right-light.277ae247.png",ue="/chat-box/assets/blob-top-light.15dc8ab1.png",me="/chat-box/assets/blob-bottom-light.a7aed2a5.png";const pe={expose:[],setup(e){async function o(){await xs.push({path:"/",force:!0})}return(e,a)=>(s(),t("img",{class:"w-36",src:"/chat-box/assets/logo.b62c4343.png",alt:"logo",onClick:o}))}},be=i({modal:"",modalProps:{}}),ge=(e,o={})=>{be.modal=e,be.modalProps=o},fe=()=>{be.modal="",be.modalProps={}},he=p.create({baseURL:"https://api-chatbox.herokuapp.com"});he.interceptors.request.use((e=>{const o=localStorage.getItem("token");return e.headers.Authorization="Bearer "+o,e}));const xe=i({user:{}}),we=async()=>{if(!window.localStorage.getItem("token"))return null;try{const e=await he.get("/user");return xe.user=e.data,xe.user}catch(e){return null}},ke=()=>(xe.user=(()=>{const e=c({dictionaries:[u,m],separator:"-"}).split("-");let o="";e.forEach((e=>{const s=e.charAt(0).toUpperCase()+e.slice(1);o+=s}));const s=d();return{username:o,_id:s,isAnonymous:!0}})(),xe.user),ve=()=>xe,ye={class:"flex flex-col items-start mb-4"},_e=a("label",{for:"username"},"Username",-1),Ce={key:0,class:"text-red-400 text-sm animate__animated animate__fadeInDown mt-1"},Pe={class:"flex flex-col items-start mb-4"},ze=a("label",{for:"password"},"Password",-1),Re={key:0,class:"text-red-400 text-sm animate__animated animate__fadeInDown mt-1"},je=a("button",{type:"submit",class:"rounded-full bg-chatbox-bg-dark w-full p-3 focus:outline-none hover:bg-chatbox-pink"}," Login ",-1),Ie=n("No Account? Create now!"),Le={expose:[],setup(e){const o=i({username:"",password:""}),l={username:{required:y,alphaNum:_},password:{required:y,alphaNum:_}},{value:n}=g(l,o);async function c(){n.$touch();if(!(await n.$validate()))return;ge("loading"),await(async(e,o)=>{try{const s=b.AES.encrypt(o,"chatbox-is-cool").toString(),t=await he.patch("/auth/login",{username:e,password:s});localStorage.setItem("token",t.data.token);const a=t.data;delete a.token,xe.user=a,fe()}catch(s){console.error(s),fe(),ge("error",{errorMessage:s.response.data.message,disableBackdropClick:!0,duration:3e3})}})(o.username,o.password);const{user:e}=ve();0!==Object.keys(e).length&&await xs.push({path:"/user",force:!0})}return(e,l)=>{const i=r("router-link");return s(),t("form",{onSubmit:v(c,["prevent"]),class:"animate__animated animate__bounceIn w-4/5 md:max-w-screen-sm bg-chatbox-bg-light rounded-xl p-8 text-white border-2 border-chatbox-pink border-solid z-10"},[a("div",ye,[_e,f(a("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>x(o).username=e),class:"focus:outline-none focus:ring-2 focus:ring-chatbox-pink shadow-sm rounded p-2 text-black w-full",type:"text",id:"username",placeholder:"Username"},null,512),[[h,x(o).username]]),x(n).username.$error?(s(),t("div",Ce," Invalid Username ")):w("",!0)]),a("div",Pe,[ze,f(a("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>x(o).password=e),class:"focus:outline-none focus:ring-2 focus:ring-chatbox-pink shadow-sm rounded p-2 text-black w-full",type:"password",id:"password",placeholder:"Password"},null,512),[[h,x(o).password]]),x(n).password.$error?(s(),t("div",Re," Invalid Password ")):w("",!0)]),je,a(i,{to:"/register",class:"text-sm underline"},{default:k((()=>[Ie])),_:1})],40,["onSubmit"])}}},Be={class:"registration-page flex flex-col items-center md:justify-center w-full bg-chatbox-bg-dark h-full pt-10 md:p-10 gap-10 md:gap-0"},Ue=a("img",{class:"left-blob hidden md:block",src:ce,alt:"blob"},null,-1),Me=a("img",{class:"right-blob hidden md:block",src:de,alt:"blob"},null,-1),De=a("img",{class:"top-blob md:hidden",src:ue,alt:"blob"},null,-1),$e=a("img",{class:"bottom-blob md:hidden",src:me,alt:"blob"},null,-1),Se={expose:[],setup:e=>(e,o)=>(s(),t("div",Be,[a(pe,{class:"md:absolute md:top-4 z-10"}),a(Le),Ue,Me,De,$e]))},Ee={class:"flex flex-col items-start mb-4"},Ne=a("label",{for:"username"},"Username",-1),Ae={key:0,class:"text-red-400 text-sm animate__animated animate__fadeInDown mt-1"},Oe={class:"flex flex-col items-start mb-4"},qe=a("label",{for:"password"},"Password",-1),Ve={key:0,class:"text-red-400 text-sm animate__animated animate__fadeInDown mt-1"},He={class:"flex flex-col items-start mb-4"},Te=a("label",{for:"confirmPassword"},"Confirm Password",-1),Je={key:0,class:"text-red-400 text-sm animate__animated animate__fadeInDown mt-1"},Fe=a("button",{type:"submit",class:"rounded-full bg-chatbox-bg-dark w-full p-3 focus:outline-none hover:bg-chatbox-pink"}," Register ",-1),Ke=n("Existing User? Login Now!"),Ze={expose:[],setup(e){const o=i({username:"",password:"",confirmPassword:""}),l={username:{required:y,alphaNum:C.withMessage("Username cannot contain spaces and symbols",_)},password:{required:y,alphaNum:C.withMessage("Password cannot contain spaces and symbols",_)},confirmPassword:{required:y,alphaNum:C.withMessage("Password cannot contain spaces and symbols",_),samePassword:C.withMessage("Password is not the same",(e=>e===o.password))}},{value:n}=g(l,o);async function c(){n.$touch();if(!(await n.$validate()))return;ge("loading"),await(async(e,o)=>{try{const s=b.AES.encrypt(o,"chatbox-is-cool").toString(),t=await he.post("/auth/register",{username:e,password:s});return fe(),ge("success",{successMessage:"Registration Success! You may now login! ;)",disableBackdropClick:!0,duration:3e3}),Promise.resolve(t.data)}catch(s){return fe(),ge("error",{errorMessage:s.response.data.message,disableBackdropClick:!0,duration:3e3}),null}})(o.username,o.password);const{user:e}=ve();0!==Object.keys(e).length&&await xs.push({path:"/user",force:!0})}return(e,l)=>{const i=r("router-link");return s(),t("form",{onSubmit:v(c,["prevent"]),class:"animate__animated animate__bounceIn w-4/5 md:max-w-screen-sm bg-chatbox-bg-light rounded-xl p-8 text-white border-2 border-chatbox-pink border-solid z-10"},[a("div",Ee,[Ne,f(a("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>x(o).username=e),class:"focus:outline-none focus:ring-2 focus:ring-chatbox-pink shadow-sm rounded p-2 text-black w-full",type:"text",id:"username",placeholder:"Enter Username"},null,512),[[h,x(o).username]]),x(n).username.$error?(s(),t("div",Ae,P(x(n).username.$errors[0].$message),1)):w("",!0)]),a("div",Oe,[qe,f(a("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>x(o).password=e),class:"focus:outline-none focus:ring-2 focus:ring-chatbox-pink shadow-sm rounded p-2 text-black w-full",type:"password",id:"password",placeholder:"Password"},null,512),[[h,x(o).password]]),x(n).password.$error?(s(),t("div",Ve,P(x(n).password.$errors[0].$message),1)):w("",!0)]),a("div",He,[Te,f(a("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>x(o).confirmPassword=e),class:"focus:outline-none focus:ring-2 focus:ring-chatbox-pink shadow-sm rounded p-2 text-black w-full",type:"password",id:"confirmPassword",placeholder:"Confirm Password"},null,512),[[h,x(o).confirmPassword]]),x(n).confirmPassword.$error?(s(),t("div",Je,P(x(n).confirmPassword.$errors[0].$message),1)):w("",!0)]),Fe,a(i,{to:"/login",class:"text-sm underline"},{default:k((()=>[Ke])),_:1})],40,["onSubmit"])}}},Ge={class:"registration-page flex flex-col items-center md:justify-center w-full bg-chatbox-bg-dark h-full pt-10 md:p-10 gap-10 md:gap-0"},Qe=a("img",{class:"left-blob hidden md:block",src:ce,alt:"blob"},null,-1),We=a("img",{class:"right-blob hidden md:block",src:de,alt:"blob"},null,-1),Xe=a("img",{class:"top-blob md:hidden",src:ue,alt:"blob"},null,-1),Ye=a("img",{class:"bottom-blob md:hidden",src:me,alt:"blob"},null,-1),eo={expose:[],setup:e=>(e,o)=>(s(),t("div",Ge,[a(pe,{class:"w-36 md:absolute md:top-4 z-10"}),a(Ze),Qe,We,Xe,Ye]))},oo=i({socket:{}}),so=(e,o)=>{oo.socket.emit(e,o)},to=(e,o)=>{oo.socket.on(e,o)},ao=()=>{oo.socket.close(),oo.socket={}},lo=i({rooms:[],joinedRoom:{},isLoading:!1}),no=async e=>{try{const o=await he.delete(`/room/${e}`);return lo.rooms=lo.rooms.filter((o=>o._id!==e)),fe(),o.data}catch(o){return ge("error",{errorMessage:o.response.data.message,disableBackdropClick:!0,duration:3e3}),null}},ro=()=>{lo.joinedRoom={}},io=async(e,o)=>{try{const s=(await he.get(`/room/${e}`)).data;return s&&(await(async()=>{const e=z("https://api-chatbox.herokuapp.com",{path:"/chat-box/rooms/",transports:["websocket"]});oo.socket=e})(),so("join room",{roomID:e,user:o}),lo.joinedRoom=s),s}catch(s){return ge("error",{errorMessage:s.response.data.message,disableBackdropClick:!0,duration:3e3}),null}},co=()=>lo,uo={class:"grid sm:grid-cols-3 grid-rows-2 grid-cols-2 sm:grid-rows-none gap-4 max-w-3xl w-full place-content-center"},mo={expose:[],setup(e){const o=R("");function l(){ge("create-room")}async function n(){""!==o.value.trim()&&(ge("loading",{disableBackdropClick:!0}),await xs.push({path:"/room/"+o.value}))}return(e,r)=>(s(),t("div",uo,[f(a("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>o.value=e),type:"text",class:"col-span-2 rounded-lg outline-none p-4",placeholder:"Room ID"},null,512),[[h,o.value]]),a("div",{class:"sm:col-span-1 col-span-2 grid grid-cols-2 gap-4"},[a("button",{onClick:n,type:"submit",class:"rounded bg-chatbox-bg-dark text-white border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink"}," Join "),a("button",{onClick:l,class:"rounded bg-chatbox-bg-dark text-white border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink",type:"button"}," Create ")])]))}},po={expose:[],setup:e=>(e,o)=>(s(),t(pe))},bo=e=>{const o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o);const s=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select(),document.execCommand("copy"),document.body.removeChild(o),s&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(s))},go=Object.freeze({success:1,general:2,tip:3,info:4,warning:5,alert:6}),fo=i({type:"",message:"",options:{}}),ho=(e,o,s={})=>{fo.type=e,fo.message=o,fo.options=s},xo={class:"hidden md:grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 w-full md:px-4 gap-2 md:gap-0"},wo={class:"place-self-center sm:col-span-2 md:col-span-3 break-all"},ko={class:"grid col-span-1 grid-cols-2 grid-rows-2 sm:grid-rows-none gap-2 md:grid-cols-3 md:gap-4"},vo={class:"place-self-center sm:col-span-2 md:col-span-3 break-all"},yo={expose:[],props:{room:{type:Object}},setup(e){const o=e;function l(){bo(o.room._id),ho(go.success,"Room ID Copied",{})}async function n(){ge("loading",{disableBackdropClick:!0}),await xs.push({path:"/room/"+o.room._id,force:!0})}function r(){ge("loading"),no(o.room._id)}function i(){ge("room-options",{roomName:o.room.name,roomID:o.room._id})}return(e,c)=>(s(),t(I,null,[a("div",xo,[a("h4",wo,P(o.room.name),1),a("div",ko,[a("button",{title:"Join room",class:"rounded bg-chatbox-bg-dark text-white border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink",onClick:n},[a(x(j),{size:"lg",icon:["fas","door-open"],class:"text-white hidden sm:inline-block"}),a(x(j),{size:"sm",icon:["fas","door-open"],class:"text-white sm:hidden"})]),a("button",{title:"Copy link to clipboard",class:"rounded bg-chatbox-bg-dark text-white border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink",onClick:l},[a(x(j),{size:"lg",icon:["fas","clipboard"],class:"text-white hidden sm:inline-block"}),a(x(j),{size:"sm",icon:["fas","clipboard"],class:"text-white sm:hidden"})]),a("button",{title:"Delete room",class:"rounded bg-chatbox-bg-dark text-white border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink",onClick:r},[a(x(j),{size:"lg",icon:["fas","trash"],class:"text-red-400 hidden sm:inline-block"}),a(x(j),{size:"sm",icon:["fas","trash"],class:"text-red-400 sm:hidden"})])])]),a("div",{class:"flex md:hidden w-full justify-center p-2 rounded-lg bg-chatbox-bg-light hover:bg-gray-500",onClick:i},[a("h4",vo,P(o.room.name),1)])],64))}},_o={class:"flex-1 flex-grow flex flex-col overflow-x-auto gap-4"},Co={key:0},Po={expose:[],setup(e){const o=co();return(async()=>{try{lo.isLoading=!0;const e=await he.get("/room");lo.rooms=e.data,lo.isLoading=!1}catch(e){lo.isLoading=!1,ge("error",{errorMessage:e.response.data.message,disableBackdropClick:!0,duration:3e3})}})(),R([...Array(20)]),(e,a)=>(s(),t("div",_o,[x(o).isLoading?(s(),t("div",Co,"Loading Rooms...")):(s(!0),t(I,{key:1},L(x(o).rooms,(e=>(s(),t(yo,{key:e._id,room:e},null,8,["room"])))),128))]))}};const zo=l("data-v-2b19909c");e("data-v-2b19909c");const Ro={id:"user-panel",class:"flex flex-col flex-1 bg-chatbox-bg-dark rounded-lg h-full max-w-3xl w-full text-white p-4 gap-4 overflow-hidden"},jo=a("div",null,null,-1),Io=a("h3",{class:"font-sniglet text-xl"},"Created Rooms",-1);o();const Lo={expose:[],setup(e){async function o(){await(async()=>{window.localStorage.removeItem("token"),xe.user={}})(),await xs.push({path:"login"})}return zo(((e,l)=>(s(),t("div",Ro,[a("div",{class:"grid grid-cols-3"},[jo,Io,a("a",{class:"cursor-pointer text-red-400 hover:text-chatbox-pink",onClick:o},"Sign out")]),a(Po)]))))},__scopeId:"data-v-2b19909c"},Bo={class:"flex flex-col items-center bg-chatbox-bg-light w-full h-full md:h-screen p-4 md:p-8 gap-8"},Uo={expose:[],setup:e=>(e,o)=>(s(),t("div",Bo,[a(mo),a(Lo),a(po)]))},Mo=e=>{const o=new B;return o.allow_native=!0,o.replace_colons(e),o.init_env(),o.replace_mode="unified",o.allow_native=!0,o.replace_colons(e)};const Do=l("data-v-680e8d86");e("data-v-680e8d86");const $o={class:"grid grid-cols-2 p-2"},So={key:0,class:"grid grid-cols-2 col-span-2"},Eo=a("div",{class:"cols-span-1"},null,-1),No={class:"animate__animated animate__slideInRight"},Ao={class:"text-right"},Oo={class:"break-all bg-chatbox-bg-light rounded-lg w-full border-chatbox-pink border-2 border-solid p-2"},qo={class:"text-sm text-gray-500 text-right"},Vo={key:1,class:"cols-span-1 animate__animated animate__slideInLeft"},Ho={class:"text-left"},To={class:"break-all bg-chatbox-bg-light rounded-lg w-full border-chatbox-pink border-2 border-solid p-2"},Jo={class:"text-sm text-gray-500 text-left"};o();const Fo={expose:[],props:{message:{type:Object,required:!0}},setup(e){const o=e,l=ve(),n=o.message.content.match(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi);const r=R(U(o.message.timestamp).fromNow()),i=R(Mo(o.message.content));if(n)for(let s=0;s<n.length;s++){const e=n[s],t=`<a style="color: var(--color-accent); text-decoration: underline;" href=${e} target="_blank">${e}</a>`;i.value=Mo(o.message.content.replace(e,t))}return setInterval((()=>{r.value=U(o.message.timestamp).fromNow()}),1e3),Do(((e,n)=>(s(),t("div",$o,[o.message.username==x(l).user.username?(s(),t("div",So,[Eo,a("div",No,[a("h1",Ao,P(o.message.username),1),a("div",Oo,[a("div",{innerHTML:i.value},null,8,["innerHTML"])]),a("h1",qo,P(r.value),1)])])):(s(),t("div",Vo,[a("h1",Ho,P(o.message.username),1),a("div",To,[a("div",{innerHTML:i.value},null,8,["innerHTML"])]),a("h1",Jo,P(r.value),1)]))]))))},__scopeId:"data-v-680e8d86"},Ko={expose:[],setup(e){const o=R(null),a=R([]);return M((()=>{to("chat message",(e=>{a.value=[e.data,...a.value],o.scrollTop=o.scrollHeight}))})),(e,l)=>(s(),t("div",{ref:o,class:"flex-1 flex flex-col-reverse overflow-x-hidden gap-4 p-2 scrollbar scrollbar-thin scrollbar- scrollbar-thumb-chatbox-pink scrollbar-track-transparent"},[(s(!0),t(I,null,L(a.value,(e=>(s(),t(Fo,{key:e.timestamp,message:e},null,8,["message"])))),128))],512))}},Zo={class:"flex w-full"},Go={class:"bg-chatbox-bg-light rounded-tr-lg rounded-br-lg"},Qo={expose:[],setup(e){const o=R("");function l(){if(""!==o.value){const{joinedRoom:e}=co(),{user:s}=ve();so("chat message",{roomID:e._id,message:{username:s.username,content:o.value}}),o.value=""}}return D(),(e,n)=>(s(),t("div",Zo,[f(a("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>o.value=e),onKeyup:$(l,["enter"]),type:"text",class:"w-full p-2 focus:outline-none bg-chatbox-bg-light rounded-tl-lg rounded-bl-lg",placeholder:"Enter Message"},null,40,["onKeyup"]),[[h,o.value]]),a("div",Go,[a("button",{onClick:l,class:"rounded-full text-white p-3 focus:outline-none hover:bg-gray-600"},[a(x(j),{size:"lg",icon:["fas","paper-plane"],class:"text-chatbox-pink"})])])]))}},Wo={class:"relative p-2 md:p-0 flex flex-col gap-2"},Xo={class:"md:hidden flex w-full justify-end p-2 z-10"},Yo={class:"md:hidden absolute mt-1 left-0 right-0 text-2xl"},es={class:"hidden md:block text-2xl"},os=a("div",{class:"w-full bg-chatbox-bg-light h-1 rounded-full"},null,-1),ss={expose:[],setup(e){const{joinedRoom:o}=co();function l(){ge("people-list")}return(e,n)=>(s(),t("div",Wo,[a("div",Xo,[a(x(j),{onClick:l,size:"lg",icon:["fas","info-circle"],class:"text-chatbox-pink"})]),a("p",Yo,P(x(o).name),1),a("p",es,P(x(o).name),1),os]))}},ts={class:"flex flex-col col-span-12 sm:col-span-8 bg-chatbox-bg-dark rounded-lg h-full text-white p-2 md:p-4 gap-4 overflow-hidden"},as=a("div",{class:"h-full rounded-full w-1 bg-chatbox-bg-light"},null,-1),ls={expose:[],setup(e){const{joinedRoom:o}=co(),{user:l}=ve();function n(){bo(window.location.href),ho(go.success,"Room Link Copied!")}async function r(){ge("loading",{disableBackdropClick:!0}),so("leave room",{user:l,roomID:o._id}),ro(),ao(),await xs.push({path:"/user",force:!0}),fe()}return(e,o)=>(s(),t("div",ts,[a(ss),a(Ko),a(Qo),a("div",{class:"md:hidden flex justify-evenly rounded-lg pb-4"},[a("button",{class:"text-red-400 focus:outline-none hover:bg-gray-500 rounded-lg",type:"button",onClick:r}," Leave "),as,a("button",{class:"text-green-400 focus:outline-none hover:bg-gray-500 rounded-lg p-2",onClick:n}," Copy Link ")])]))}},ns={class:"font-sniglet"},rs={key:0,class:"text-chatbox-pink underline"},is={key:1,class:"text-white"},cs={key:2},ds={expose:[],props:{user:{type:Object,required:!0}},setup(e){const o=e,{joinedRoom:a}=co(),{user:l}=ve();let n=R(!1);return M((()=>{n.value=o.user._id===a.createdBy})),(e,a)=>(s(),t("h4",ns,[o.user.username==x(l).username?(s(),t("span",rs,P(o.user.username),1)):(s(),t("span",is,P(o.user.username),1)),x(n)?(s(),t("span",cs,"ðŸŽ‡")):w("",!0)]))}},us={class:"flex flex-col gap-4 flex-1 overflow-x-auto"},ms={expose:[],setup(e){const{joinedRoom:o}=co();return(e,a)=>(s(),t("div",us,[(s(!0),t(I,null,L(x(o).users,(e=>(s(),t(ds,{key:e._id,user:e},null,8,["user"])))),128))]))}},ps={class:"hidden md:flex md:flex-col md:col-span-4 bg-chatbox-bg-dark rounded-lg h-full text-white p-4 gap-4 overflow-hidden"},bs=a("p",{class:"text-3xl"},"People",-1),gs=a("div",{class:"h-full rounded-full w-1 bg-chatbox-bg-dark"},null,-1),fs={expose:[],setup(e){const{joinedRoom:o}=co(),{user:l}=ve();function n(){bo(window.location.href),ho(go.success,"Room Link Copied!")}async function r(){ge("loading",{disableBackdropClick:!0}),so("leave room",{user:l,roomID:o._id}),ro(),ao(),await xs.push({path:"/user"})}return(e,o)=>(s(),t("div",ps,[bs,a(ms),a("div",{class:"flex justify-evenly bg-chatbox-bg-light rounded-lg p-2"},[a("button",{class:"text-red-400 focus:outline-none hover:bg-gray-500 rounded-lg p-2",type:"button",onClick:r}," Leave "),gs,a("button",{class:"text-green-400 focus:outline-none hover:bg-gray-500 rounded-lg p-2",onClick:n}," Copy Link ")])]))}},hs={class:"md:grid md:grid-cols-12 md:items-center bg-chatbox-bg-light w-full h-screen p-2 sm:p-8 gap-8 font-sniglet"},xs=S({routes:[{name:"Home",path:"/",component:ie},{name:"Register",path:"/register",component:eo},{name:"Login",path:"/login",component:Se,beforeEnter:(e,o,s)=>{ge("loading",{disableBackdropClick:!0}),we().then((e=>{e?(fe(),s({path:"user"})):(fe(),s())}))}},{name:"User",path:"/user",component:Uo,beforeEnter:(e,o,s)=>{fe(),s()}},{name:"Room",path:"/room/:id",props:!0,component:{expose:[],props:{id:{type:String}},setup:e=>(to("send data",(e=>{var o;fe(),o=e,lo.joinedRoom&&(lo.joinedRoom.users=o)})),(e,o)=>(s(),t("div",hs,[a(fs),a(ls)])))},beforeEnter:async(e,o,s)=>{const{id:t}=e.params;if(t){ge("loading",{disableBackdropClick:!0});let e=await we();e||(e=ke());let o=null;o=await io(t,e),o?s():s({path:"user",force:!0})}else s({path:"user",force:!0})}},{path:"/:pathMatch(.*)*",component:ie}],history:E()});xs.beforeEach(((e,o,s)=>{["Home","Login","Register","Room"].find((o=>o===e.name))?s():we().then((e=>{e?s():s({path:"/login",force:!0})}))}));const ws={expose:[],setup(e){const o=new N({durations:{global:2e3}});return A(fo,((e,s)=>{switch(e.type){case go.success:o.success(e.message,e.options);break;case go.general:o.general(e.message,e.options);break;case go.info:o.info(e.message,e.options);break;case go.warning:o.warning(e.message,e.options);break;case go.alert:o.alert(e.message,e.options)}})),()=>{}}},ks=a("div",{class:"w-full h-full absolute top-0 left-0 bg-gray-600 opacity-50 z-40"},null,-1),vs={class:"grid place-content-center w-full h-full z-50"},ys={expose:[],props:{modalProps:{type:Object,default:{disableBackdropClick:!1}}},setup(e){const o=e;function l(){console.log(o.modalProps),o.modalProps.disableBackdropClick||fe()}return(e,o)=>(s(),t("div",{class:"w-full h-full absolute top-0 left-0 z-40",onClick:l},[ks,a("div",vs,[a(x(j),{size:"4x",icon:["fas","circle-notch"],class:"text-chatbox-pink animate-spin"})])]))}},_s={class:"flex items-center justify-center w-full h-full fixed top-0 left-0 z-50"},Cs={class:"animate__animated animate__zoomIn bg-chatbox-bg-light rounded-lg w-full max-w-sm z-50 p-4"},Ps={class:"flex flex-col items-center h-full"},zs={class:"flex items-center flex-1 text-center text-md text-white"},Rs={class:"text-lg text-white"},js={expose:[],props:{modalProps:{type:Object,default:{disableBackdropClick:!1}}},setup(e){const o=e;function l(){o.modalProps.disableBackdropClick||fe()}return(e,n)=>(s(),t("div",_s,[a("div",Cs,[a("div",Ps,[a(x(j),{size:"6x",icon:["fas","exclamation-circle"],class:"text-red-400"}),a("div",zs,[a("p",Rs," Error: "+P(o.modalProps.errorMessage),1)])])]),a("div",{class:"fixed bg-black opacity-50 w-full h-full z-40",onClick:l})]))}},Is={class:"flex items-center justify-center w-full h-full fixed top-0 left-0 z-50"},Ls={class:"animate__animated animate__zoomIn bg-chatbox-bg-light rounded-lg w-full max-w-sm z-50 p-4"},Bs={class:"flex flex-col items-center h-full"},Us={class:"flex items-center flex-1 text-center text-md text-white"},Ms={class:"text-lg text-white"},Ds={expose:[],props:{modalProps:{type:Object,default:{disableBackdropClick:!1}}},setup(e){const o=e;function l(){o.modalProps.disableBackdropClick||fe()}return(e,n)=>(s(),t("div",Is,[a("div",Ls,[a("div",Bs,[a(x(j),{size:"6x",icon:["fas","check-circle"],class:"text-green-400"}),a("div",Us,[a("p",Ms,P(o.modalProps.successMessage),1)])])]),a("div",{class:"fixed bg-black opacity-50 w-full h-full z-40",onClick:l})]))}},$s={class:"flex items-center justify-center w-full h-full fixed top-0 left-0 z-50"},Ss={class:"animate__animated animate__zoomIn bg-chatbox-bg-light rounded-lg w-full max-w-sm z-50 p-4"},Es={class:"flex flex-col items-center h-full"},Ns=a("h4",{class:"text-xl text-white mb-4"},"Create Room",-1),As={class:"flex items-center flex-1"},Os={class:"flex flex-col sm:flex-row gap-4"},qs={expose:[],setup(e){const o=R("");function l(){fe()}async function n(){fe(),ge("loading",{disableBackdropClick:!0}),await(async e=>{try{ge("loading");const o=await he.post("/room",{name:e});return lo.rooms=[...lo.rooms,o.data],fe(),o.data}catch(o){return ge("error",{errorMessage:o.response.data.message,disableBackdropClick:!0,duration:3e3}),null}})(o.value),fe()}return(e,r)=>(s(),t("div",$s,[a("div",Ss,[a("div",Es,[Ns,a("div",As,[a("div",Os,[f(a("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>o.value=e),class:"rounded-lg outline-none p-2 text-black",type:"text",placeholder:"Room Name"},null,512),[[h,o.value]]),a("button",{onClick:n,class:"text-white rounded-lg bg-chatbox-bg-dark w-full p-3 focus:outline-none hover:bg-chatbox-pink",type:"button"}," Create Room ")])])])]),a("div",{class:"fixed bg-black opacity-50 w-full h-full z-40",onClick:l})]))}},Vs={class:"flex items-center justify-center w-full h-full fixed top-0 left-0 z-50 p-8"},Hs={class:"animate__animated animate__zoomIn bg-chatbox-bg-light rounded-lg w-full h-1/2 z-50 p-4"},Ts={class:"flex flex-col items-center h-full"},Js=a("div",{class:"w-full flex flex-col gap-2"},[a("h4",{class:"text-xl text-white"},"People"),a("div",{class:"w-full bg-chatbox-bg-dark h-1 rounded-full"})],-1),Fs={class:"flex flex-col gap-4 flex-1 w-full overflow-x-auto p-4"},Ks={expose:[],setup(e){const{joinedRoom:o}=co();function l(){fe()}return(e,n)=>(s(),t("div",Vs,[a("div",Hs,[a("div",Ts,[Js,a("div",Fs,[(s(!0),t(I,null,L(x(o).users,(e=>(s(),t(ds,{key:e._id,user:e},null,8,["user"])))),128))])])]),a("div",{class:"fixed bg-black opacity-50 w-full h-full z-40",onClick:l})]))}},Zs={class:"flex items-center justify-center w-full h-full fixed top-0 left-0 z-50"},Gs={class:"animate__animated animate__zoomIn bg-chatbox-bg-light rounded-lg w-full max-w-sm z-50 p-4"},Qs={class:"flex flex-col items-center h-full"},Ws={class:"text-xl text-white mb-4"},Xs={expose:[],props:{modalProps:{type:Object,default:{disableBackdropClick:!1,roomName:"",roomID:""}}},setup(e){const{modalProps:o}=e;function l(){fe()}function n(){bo(o.roomID),ho(go.success,"Room ID Copied",{})}async function r(){ge("loading",{disableBackdropClick:!0}),await xs.push({path:"/room/"+o.roomID,force:!0})}function i(){ge("loading"),no(o.roomID)}return(e,c)=>(s(),t("div",Zs,[a("div",Gs,[a("div",Qs,[a("h4",Ws,P(o.roomName),1),a("div",{class:"flex flex-col items-center flex-1 gap-2"},[a("button",{title:"Join Room",class:"w-full rounded bg-chatbox-bg-dark text-white border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink",onClick:r}," Join "),a("button",{title:"Copy Room ID",class:"w-full rounded bg-chatbox-bg-dark text-white border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink",onClick:n}," Copy Room ID "),a("button",{title:"Delete Room",class:"w-full rounded bg-chatbox-bg-dark text-red-400 border-2 border-solid border-chatbox-pink p-3 focus:outline-none hover:bg-chatbox-pink",onClick:i}," Delete Room ")])])]),a("div",{class:"fixed bg-black opacity-50 w-full h-full z-40",onClick:l})]))}},Ys={expose:[],setup(e){const o=be;return A(o,((e,o)=>{o.modalProps.duration&&setTimeout((()=>{fe()}),o.modalProps.duration)})),(e,a)=>(s(),t("div",null,["loading"==x(o).modal?(s(),t(ys,{key:0,class:"animate__animated animate__fadeIn",modalProps:x(o).modalProps},null,8,["modalProps"])):w("",!0),"error"==x(o).modal?(s(),t(js,{key:1,modalProps:x(o).modalProps},null,8,["modalProps"])):w("",!0),"success"==x(o).modal?(s(),t(Ds,{key:2,modalProps:x(o).modalProps},null,8,["modalProps"])):w("",!0),"create-room"==x(o).modal?(s(),t(qs,{key:3})):w("",!0),"people-list"==x(o).modal?(s(),t(Ks,{key:4})):w("",!0),"room-options"==x(o).modal?(s(),t(Xs,{key:5,modalProps:x(o).modalProps},null,8,["modalProps"])):w("",!0)]))}};const et={expose:[],setup:e=>(e,o)=>{const l=r("router-view");return s(),t(I,null,[a(l),a(Ys),a(ws)],64)}};O.add(q),O.add(V),O.add(H),O.add(T),O.add(J),O.add(F),O.add(K),O.add(Z),G(et).use(xs).mount("#app");
